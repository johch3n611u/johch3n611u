## group 專案

npm i --legacy-peer-deps

node projects/pnshk/src/scripts/build-hash-update.ts

app.config url 打開註解

polyfills.ts add `(window as any)['global'] = window`

## e2-angular 專案

`npm i @angular/cli@9.1.15 -g`

`nvm use 12.18.3`

cli & node 版本必須要一樣，不然問題會很多

app.module.ts url 打開註解

polyfills.ts add `(window as any)['global'] = window`

有參考他本身自己的 lib 需要 build `ng build e2-lib`

ng serve wtchk

---

BU 有各自對應的 baseUrl 參數 ex wtctw = s4d1

https://sites.google.com/webglsoft.com/gl-e2a/%E9%A6%96%E9%A0%81?authuser=3

---

# cmd

`explorer .` 直接開啟資料夾

---

## 專有名詞

PR ( Pull Request ) 是 github 发起合并分支请求时的叫法，MR ( Merge Request) 是 gitlab 发起合并分支请求时的叫法

軟體設計規格書 Software Design Description, SDD

merge request ,MR

CR Deck

CR 是 "change request" 的簡稱，意思是變更請求。在軟件工程中，CR 是指對軟件系統的更改請求，通常是由客戶或用戶提出的。CR 的目的是改進軟件的功能或性能，或者修正軟件中的錯誤。

"Deck" 通常指的是一組文件，包含了關於某個主題的信息和資料。因此，"CR Deck" 可能指的是一組文件，包含了關於某個變更請求的信息和資料。這些信息可能包括變更請求的原因、預期的影響、變更請求的詳細設計和實現計劃等。

---

### gitlab 建立 mr

想辦法找到 Merge request / Pull request (github稱呼)

Title: JIRA 編號 / BranchName + Title

Desciption: 截修改好的圖片,分為 手機板 (mobile) 和 電腦版 (desktop)

Assignee:組長 Reviewer:大組長 (PeiFeng GL)

```
|mobile|desktop|
|------|------|
|image|image|
```

---

cx-page-slot

https://b-nova.com/en/home/content/sap-commerce-spartacus-with-angular-step-by-step

https://blog.51cto.com/jerrywangsap/3063909

---

flex 排版公式 小畫家規劃一下切好後確定 

justify-content 水平對齊方式

align-items 垂直對齊方式

flex-direction 排列方向 ( 可以影響上述 )

flex-wrap 元素超過範圍是否換行

flex-flow 排列方向 與 斷行方式 ( 縮寫，結合 flex-direction & flex-wrap )

剩下的比較細節調整，或用 grid 12 行去分割之類的設計

---

Please proceed QA tmr am 如何翻譯

"QA tmr am" 是英文縮寫，意思是 "quality assurance tomorrow morning"。

---

## HttpClient-HttpParams

https://blog.miniasp.com/post/2022/05/23/Angular-HttpClient-HttpParams-QueryString

看 code 看到一些沒用過的寫法

## ngIf #template

```
<ng-container *ngIf="cart.deliveryZone.code === 'cn'; else basicDeliveryCharge ">
     ///
</ng-container>
<ng-template #basicDeliveryCharge>
    ///
</ng-template>
```

## pipe keyvalue

https://blog.kevinyang.net/2020/02/13/angular-keyvaluepipe/

---

SDD商品應該會有自己的表格，表格標題可能是Supplier Support Delivery或 SDD商店名稱

[什么是SDD商业模式？ - 百度知道](https://zhidao.baidu.com/question/100916372.html)

sdd商业模式即为最近距离配送（The shortest distance delivery）SDD：传统配送是商流和物流的紧密结合，其实质为：在某小范围中物流的全部活动，其主要经济活动为送货 ...

+886 0933333333 => 666666 ( 驗證或手機好像都可以填這組 )

+852 40497492 香港 ( 台灣可以註冊海外

```
https://api.cmb8j9fjhz-apj4aswat1-s1-public.model-t.cc.commerce.ondemand.com/
api/v2/wtctw/forms/
freeMemberRegistrationForm?fields=ASIA_DEFAULT&lang=zh_TW&curr=TWD
```

動態 Form 翻譯的 KeyValue 可以根據 Api 回傳作對應

---

哦對了大家

evan不存在e2 & pns哦

記得記得在 jira 或者 github 上要提起的話，都要是標記 kevin or keivngls 哦

jira 是Kevin GL，github 是 kevingls，因為 kevin 太菜市場名字了，所以用一個新帳號

## 流程

1. 被交派 jira 當下把一些細節確認一下，別只回 ok 或者當下看完有問題要馬上問
   1. 程式相關的 domain knowhow
   2. 邏輯相關的 domain knowhow
   3. 
2. 開始 codeing 時一遇到跟想像不一樣的就問 ( 請問這個跟想像的不一樣，還是有什麼可以遵循的嗎 ? )
   1. 組員若開始開發，將 JIRA status 改為 IN PROGRESS
   2. 必須附上 test result、請注意 target branch、請注意 changes

3. code test 必須要做確實，盡量一步到位避免來來回回修改...
   1. 確定版本都存檔後，截圖比對 jira 並一一把修正位置用小畫家框選

4. 跟組長 QA 確認玩需求跟程式碼 test ok後

5. Review Request => jira 設定完成時間跟 assign 指到hk Mile 好像對方it? Review Request 不用填 Comment 不能刪除留言要小心

6. 再 comment 標記回復 mr/pr 已經上傳了

@Tag Thanks, Please check the feedback in the PR.

kevin 人頭帳號，需要指給這個 evan

> Github Assignees

<a href="D:\Desk\Cases\Zilu\githubAddReviewers.html">快速處理</a>

```
tin_aswatson
WilliamL_aswatson
Nixon-Nova_aswatson
Eric-Choi_aswatson
alan_aswatson
Tom-Lau_aswatson
Miles-Fong_aswatson
kevingls_aswatson
```

15:58 ㄩ\ㄔㄥ/ https://docs.google.com/document/d/1R0UhVhl9DdLnXjdGNxs7uIL0cP6bjFP2/edit

大家，之後的pr 如果我還在看的話呀，記得都先轉draft，如果有comment回來要改的話，我還沒轉你們看到也可以先轉draft哦，確定可以assign的時候在把它變成open
16:07 ㄩ\ㄔㄥ/ 大家，如果你們有做到pns的jira的話，github assign的人會是這些哦，跟e2稍稍有點不一樣

然後jira要assign回去的人會是william or eric，我在跟你們說，不一定
但e2幾乎都會是miles，我會給你們jira的時候跟你們說jira要回給誰

再麻煩大家哦，謝謝
16:16 ㄩ\ㄔㄥ/ 然後大家

Due date記得文件是說拿到jira就要填囉，看你預計完成時間，也可以跟我討論一下，基本上沒太難的應該都可以當天啦

啊我是要錄一下影片，所以我是assign出去才填給你們看
16:45 ㄩ\ㄔㄥ/ 全部 

大家，這裡有time log的文件，請大家要落實一下跟注意一下哦，謝謝
最重要的是要看一下帳號，如果登入共用帳號，例如mark或者人頭的，先看一下已經被log多久時間唷

https://docs.google.com/document/d/15YiM_1KnfO8TXk089d-w9gOk9isQ5GJoKf8IyJ2zgqI

---

## impex 使用方式

> impex import

https://backoffice.cmb8j9fjhz-apj3aswat1-s1-public.model-t.cc.commerce.ondemand.com/hac/console/impex/import

> backoffice apj{}aswat1-{}1

https://backoffice.cmb8j9fjhz-apj3aswat1-s1-public.model-t.cc.commerce.ondemand.com/backoffice/login.zul

apj3aswat1-s1 = S3S1

https://backoffice.cmb8j9fjhz-apj4aswat1-d1-public.model-t.cc.commerce.ondemand.com/backoffice/login.zul

apj4aswat1-d1 = S4D1

https://backoffice.cmb8j9fjhz-apj3aswat1-d1-public.model-t.cc.commerce.ondemand.com/backoffice/login.zul

apj3aswat1-d1 = S3D1

![螢幕擷取畫面 2023-01-13 095158](https://user-images.githubusercontent.com/46659635/212218837-c637e2a7-c640-44fa-835a-dcdb5475918c.png)

![image](https://user-images.githubusercontent.com/46659635/212219810-2a8fa63c-bd18-42d6-9759-65d137ffd30f.png)

修改路徑同上根據部門不同

> 02_cms-responsive-content.impex

1. 引入變數
2. INSERT_UPDATE PageTemplate、ContentSlotName ( Header、Footer )、ContentSlotForTemplate ( Header、Footer )、ContentPage

> supplierLandingPage.impex

而除了 page 以外

1. 引入變數
2. 設定 CMSFlexComponent、ContentSlot、ContentSlotForPage 
3. 設定其餘既有 slot

假設很確定可以 import $ctgVersion=Staged 與 Online 不用用 gui 按鈕 trigger 同步

到 backoffice catalog versions 到各置的 bu 國家 async version

> 上傳圖片

1. $siteResource=jar:com.aswatson.constants.ElabsampledataConstants&/sampledata/wtc/images/01_wtcmy/contentCatalogs/
2. 到 sap backoffice media 搜尋 media component 名稱從底下 gui 畫面 

必須先確定 backoffice 裡面有一張既有的照片名字才能創建 Media

盡量不整份貼上，因為香港也會 import impex 但不一定會去同步 github 專案的 impex

> smartedit

https://backoffice.cmb8j9fjhz-apj3aswat1-s1-public.model-t.cc.commerce.ondemand.com/smartedit

---

uat page api 找 name 代號 找用過的 component，

不同寫法 componentRef 可以新增 html byRef component + Slot Impex 必須要同時 import

_s by ref

e2-supplier-landing-page.config.ts 內的 slots 對應的是 position

只有[連結內找不到基礎的](https://sites.google.com/webglsoft.com/gl-tina/impex?pli=1&authuser=3) impex component 時才會需要新增 ( [新人教學](https://drive.google.com/drive/u/3/folders/1EU8WVVGOJyPRChOz56P-rwvZAVUM5HV7)： 一般 新增 components 可以分為 共用 components 和 全新 components)

```impex
Ref

#Supplier Category Banner
INSERT_UPDATE Media;$contentCV[unique=true];code[unique=true];realfilename;@media[translator=de.hybris.platform.impex.jalo.media.MediaDataTranslator];mime[default='image/png'];altText;folder(qualifier)[default='images']
				   ;;SupplierRelatedCategoryBannerMedia;P01Logo01Watsons.png;$siteResource/images/theme/P01Logo01Watsons.png;image/png;;

INSERT_UPDATE E2BannerComponent;$contentCV[unique=true];uid[unique=true];name;headline[lang=$lang];media(code, $contentCV)[lang=$lang];urlLink[default='/'];&componentRef;
;;SupplierRelatedCategoryBannerComponent1;Supplier Related Category Banner Component1;<div class="headline">GLYCOLIC ACID A</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;SupplierRelatedCategoryBannerComponent1_s
;;SupplierRelatedCategoryBannerComponent2;Supplier Related Category Banner Component2;<div class="headline">GLYCOLIC ACID B</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;SupplierRelatedCategoryBannerComponent2_s
;;SupplierRelatedCategoryBannerComponent3;Supplier Related Category Banner Component3;<div class="headline">GLYCOLIC ACID C</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;SupplierRelatedCategoryBannerComponent3_s
;;SupplierRelatedCategoryBannerComponent4;Supplier Related Category Banner Component4;<div class="headline">GLYCOLIC ACID D</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;SupplierRelatedCategoryBannerComponent4_s
;;SupplierRelatedCategoryBannerComponent5;Supplier Related Category Banner Component5;<div class="headline">GLYCOLIC ACID E</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;SupplierRelatedCategoryBannerComponent5_s
;;SupplierRelatedCategoryBannerComponent6;Supplier Related Category Banner Component6;<div class="headline">GLYCOLIC ACID F</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;SupplierRelatedCategoryBannerComponent6_s

INSERT_UPDATE ContentSlot;$contentCV[unique = true];uid[unique = true];name;active[default = true];cmsComponents(&componentRef)
;;SupplierRelatedCategoryBannerSlot1;E2 Supplier Related Category Banner Slot;;SupplierRelatedCategoryBannerComponent1_s
;;SupplierRelatedCategoryBannerSlot2;E2 Supplier Related Category Banner Slot;;SupplierRelatedCategoryBannerComponent2_s
;;SupplierRelatedCategoryBannerSlot3;E2 Supplier Related Category Banner Slot;;SupplierRelatedCategoryBannerComponent3_s
;;SupplierRelatedCategoryBannerSlot4;E2 Supplier Related Category Banner Slot;;SupplierRelatedCategoryBannerComponent4_s
;;SupplierRelatedCategoryBannerSlot5;E2 Supplier Related Category Banner Slot;;SupplierRelatedCategoryBannerComponent5_s
;;SupplierRelatedCategoryBannerSlot6;E2 Supplier Related Category Banner Slot;;SupplierRelatedCategoryBannerComponent6_s

INSERT_UPDATE ContentSlotForPage;$contentCV[unique = true];uid[unique = true];position[unique = true];page(uid, $contentCV)[unique = true][default = 'e2SupplierLandingPage'];contentSlot(uid, $contentCV)[unique = true];
;;SupplierRelatedCategoryBanner1-e2SupplierLandingPage;SupplierRelatedCategoryBanner1;;SupplierRelatedCategoryBannerSlot1;
;;SupplierRelatedCategoryBanner2-e2SupplierLandingPage;SupplierRelatedCategoryBanner2;;SupplierRelatedCategoryBannerSlot2;
;;SupplierRelatedCategoryBanner3-e2SupplierLandingPage;SupplierRelatedCategoryBanner3;;SupplierRelatedCategoryBannerSlot3;
;;SupplierRelatedCategoryBanner4-e2SupplierLandingPage;SupplierRelatedCategoryBanner4;;SupplierRelatedCategoryBannerSlot4;
;;SupplierRelatedCategoryBanner5-e2SupplierLandingPage;SupplierRelatedCategoryBanner5;;SupplierRelatedCategoryBannerSlot5;
;;SupplierRelatedCategoryBanner6-e2SupplierLandingPage;SupplierRelatedCategoryBanner6;;SupplierRelatedCategoryBannerSlot6;
```

```
uid

INSERT_UPDATE E2BannerComponent;$contentCV[unique=true];uid[unique=true];name;headline[lang=$lang];media(code, $contentCV)[lang=$lang];urlLink[default='/'];;
;;SupplierRelatedCategoryBannerComponent1;Supplier Related Category Banner Component1;<div class="headline">GLYCOLIC ACID A</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;
;;SupplierRelatedCategoryBannerComponent2;Supplier Related Category Banner Component2;<div class="headline">GLYCOLIC ACID B</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;
;;SupplierRelatedCategoryBannerComponent3;Supplier Related Category Banner Component3;<div class="headline">GLYCOLIC ACID C</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;
;;SupplierRelatedCategoryBannerComponent4;Supplier Related Category Banner Component4;<div class="headline">GLYCOLIC ACID D</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;
;;SupplierRelatedCategoryBannerComponent5;Supplier Related Category Banner Component5;<div class="headline">GLYCOLIC ACID E</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;
;;SupplierRelatedCategoryBannerComponent6;Supplier Related Category Banner Component6;<div class="headline">GLYCOLIC ACID F</div>;SupplierRelatedCategoryBannerMedia;/search?text=glycolic+acid;

INSERT_UPDATE ContentSlot;$contentCV[unique = true];uid[unique = true];name;active[default = true];cmsComponents(uid, $contentCV)
                         ;;SupplierRelatedCategoryBannerSlot;E2 Supplier Related Category Banner Slot;;SupplierRelatedCategoryBannerComponent1,SupplierRelatedCategoryBannerComponent2,SupplierRelatedCategoryBannerComponent3,SupplierRelatedCategoryBannerComponent4,SupplierRelatedCategoryBannerComponent5,SupplierRelatedCategoryBannerComponent6

INSERT_UPDATE ContentSlotForPage;$contentCV[unique = true];uid[unique = true];position[unique = true];page(uid, $contentCV)[unique = true][default = 'e2SupplierLandingPage'];contentSlot(uid, $contentCV)[unique = true];
                                ;;SupplierRelatedCategoryBanner-e2SupplierLandingPage;SupplierRelatedCategoryBanner1;;SupplierRelatedCategoryBannerSlot;
```

---

如果樣式都差不多最好整頁直接複製，不要東複製西複製

```css
// 大尺寸
    @include breakpoint(md-min) {
      * {
        background-color: red;
      }
    }

// 中尺寸
    @include breakpoint(md-max) {
      * {
        background-color: blue;
      }
    }

// 小尺寸
    @include breakpoint(xs-range){
      * {
        background-color: yellow;
      }
    }
```

## JavaScript heap out of memory

`node --max_old_space_size=8192 ./node_modules/@angular/cli/bin/ng serve wtchk`

OOS Out of Stock 售完/缺貨

## 判斷語系改哪些

問一下喔，sg 只有sgen 需要改嗎?新加坡的只有英文?

你可以看到sg上面沒有語系切換

## SmartEdit

Backoffice Smartedit Hac 這些都需要 VPN 才能訪問

當在 Stage 的 SmartEdit 更換圖片後按下 sync 會有錯誤不能同步，可以直接去 backoffice 那邊執行同步 stage > online 就可以了

缺點，這個是全部都 sync

不過在 smartedit 必填的欄位太多了，但如果是僅更換圖片就要更動許多欄位再單獨 sync，我覺得直接更換圖片再到 backoffice 同步會更保險

總之看起來還是透過 backoffice 編輯 impex 比較保險

![image](https://user-images.githubusercontent.com/46659635/220510179-0e263a54-c018-427a-bff5-c460c8986246.png)

---

## vscode saveWithoutFormat

左下設定 keyboard shortcut => saveWithoutFormat 設定為 ctrl + s 原先的改別的

---

翻譯

{{ error.topMsgKey | cxTranslate: error.topMsgParams }}

limitedAttempt: '由於安全因素，您剩下 {{attemptNumberLeft}} 次數可以嘗試，超過上限後您的帳戶將會被鎖定，需洽詢客服人員',

---

## API

### configuration

https://api.cmb8j9fjhz-apj3aswat1-s1-public.model-t.cc.commerce.ondemand.com/api/v2/wtchk/configParam/global?fields=FULL&lang=en_HK&curr=HKD

---

## Angular Chorme Tool Debug

![image](https://user-images.githubusercontent.com/46659635/233032804-6febf4fb-71e5-4d79-bde8-f28993e708c6.png)

---

## NgRx = Redux + RxJS + Angular

https://jonny-huang.github.io/angular/training/31_ngrx_1/

## 頁面連結 cxroute

> 感謝頁

/checkout/orderConfirmation/03962008

> 改密成功

/login/pw/forgetBySMS

/login/pw/changeSuccess

