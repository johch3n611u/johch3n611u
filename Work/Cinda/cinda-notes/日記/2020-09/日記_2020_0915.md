# 0830

突然不用去新竹了，我猜大概是 ai 自動化產單那出問題，順伯覺得我去也沒啥幫助留下來修 ...

---

現在遇到框架問題跟無頭程式，無法下斷點 只能靠 nlog 跟 consolewrite 超難偵錯...

<https://blog.csdn.net/u010398722/article/details/80536331>

今天又搞到，十點十一點 ... 而且不是技術 感覺根本就是流程跟環境(程式)問題

又搞到十二點 ...

## 如果在別人環境測試或開發記得要多收更多錢，或確保該環境作業是順暢的...

---

我有塞一筆到task

看一下哪邊掛掉



剛剛修正了 好像是昨天 pass 的兩個 function 會被摳到


可是我現在是讓他直接叫一個空的資料出來


什麼意思

空資料？

我打給你喔？

有地方會去調用昨天說要先 pass 的組資料的部分像是 GetChangeForPAMAITriggerBy


ok


您的作業系統版本不支援此功能。

剛剛在 run 了一次 五種類型的 debug nlog 都是跟這張截圖一樣，但如果成功的話 db ai log 必須要有寫資料進去對嗎 ?




會

現在插點還是不行？

可以 可是找不到錯誤源頭


不太確定是哪邊造成沒寫進去 五支 log 都像剛剛結圖那樣 start 後面都接 complir


插點在exception呢

感覺好像沒跑的樣子

中間邏輯感覺沒進去

你看一下servicecode

哪邊對應到task的servicecode的資料

我看 PAM_AI_CONFIG 裡面沒資料 是需要補進去嗎 ?


先不用

我打給你

您的作業系統版本不支援此功能。

有找到問題嗎

資料有從給資料的地方傳出去，但 log 是不管執行對錯都會 log ?


執行前就會先塞一筆

除非完全沒進去

是從哪個進入點進去 ? 要找哪隻檔案


帳號申請的

目前看原因好像是其實有進去單資料筆數太少


剛好那筆是裡面沒有的


用servicecode入口對不到嗎

它裡面有一些條件例如是


ApplyAccountType


現在的 code 有六種


這筆資料剛好是第六種，但裡面好像只有前四種的邏輯


那有其他資料符合的嗎

塞別筆到task呢

有寫進去了 但 log 那報這個錯




好

先借我ios那台

Iis

ok 我關掉了


我剛剛弄好的還沒丟上 iis


你先幫我處理帳號單

要可以跑

Iis 我暫時用好了

我可以清空，然後申請 帳號單嗎 ?


你先建

先不用刪

OK


把要跑的單塞到task那張

https://meet.google.com/thg-rtuq-vhi

talk一下

-1


remark


會超過




如果像 02-1 這種 跟 02 差別只差在 參數大小寫的也要建一筆嗎


AA01_001,AA01_003






這兩個的 ApplyAccountType 都是 0


是要都換成 0 嗎


可以

申請的部分上面有的測完了


只有 AA01_001,AA01_003 這兩個類別的


其他的變 異動的


talk一下

我回來了

ALTER TABLE PAM_AI_TASK_LOG MODIFY REMARK VARCHAR2(2000);

下次一起包上去

我現在要先包一版嗎 ?


我剛剛有推AI

這包有甚麼

FTP 異動



BPM_workflow_20200812_V3.xlsx
副檔名 : xlsx
Size : 341 KB
下載期限 : ~ 9.22 17:58

不好意思打擾一下，請問 AI 專案 只要用 release 啟動過一次 就能把 release 內的資料放上去嗎 還是一樣要發佈才會是 build 過的 ?


不用發布

但這個先不要掛起來

Ok 不用丟到 iis?


先不用 測好在掛起來 你可以掛起來跑看看

然後再關掉

Ok 那是只要 release 啟動過其實就跟發佈一樣了嗎？，不確定 bin 內的資料會不會是程式碼內的


啟動過就是

了解


可能先幫我確定 如果config有設 流程關卡建出來是對的

有塞入task那張表

Ok是在9006iis上測對嗎？


對 我是怕bpm那段有問題

好




好像出錯了 不太確定為什麼 編譯不會錯 但啟動會 PAM 那


我大概知道了 ... 有人更新 edmx 了 我忘記刪掉


IIS 上的 PAM AI 好像會有跟昨天一樣的錯




config問題

config內容要改

OK嗎

是昨天有改過放進 SIT那份嗎？


對

BPM那邊有出錯嗎

我在看一下，我記得我剛有放進去


還沒run，要測什麼才能知道bpm會不會錯?剛登入可以但還沒起單


跑AA01_001的單

你下午有設定config

第二句是指 SIT config嗎？


PAM_AI_TASK

PAM_AI_CONFIG

你下午有塞一筆進去PAM_AI_CONFIG

所以Portal核定起承辦單時就會 走道自動化那塊

對吧

了解，我以為是 PAM AI 開不起來的問題，我剛記得有塞 昨天SIT改過的，但還是出現剛剛那個截圖，我等等確認一下


恩恩 沒關係

好像是我丟在外層沒有用要丟在release內對嗎？


我記得檔名不一樣


這隻才是

你現在有再05嗎

但丟在外層 release 啟動的時候不會一起 build過去，所以要覆蓋?


理論上會

沒剛剛被踢出來了可能要半才能進


哦哦 其實10~15分就可以了

AI先緩著沒關係 先確定BPM那邊

嗯我試試看


怕核定出錯沒辦法讓user run比較麻煩

可以嗎 需要我幫忙看一下嗎



ok 有產道 pam


我再試著測 ai


看一下MX_NEXT_APPROVER那張表

這張單的資料

照理來說 這張表 會有 所有的關卡 ? 包含 pam ai ?


這張表會有待簽資料

下一關的待簽資料

具這張單來講

如果起單沒錯的話 他現在應該MX_NEXT_APPROVER這張表要有一筆資料

有兩筆的話


看這張圖的目前簽核者

好像跟舊的一樣

是併簽 之類的 ? 可是我看他 好像這兩個人可以直接 按節按鈕 所以等於 pam ai 沒起到關卡 ?


還是關卡資料沒設好?

我好像忘記把狀態啟動 我再跑一次


哦哦

報錯了




我看一下是為什麼


看PAM的LOG



阿

你幫我把FLOW_ROLE兩個欄位職顛倒看看


過了 我在確定一下 9006 的過 但 05 的 debug 沒過


過了 但 pam 那邊好像還是可以直接結案 沒看到 pam ai 那關 不太確定為什麼...


目前簽何者是對的嗎

對的意思是 ?


我看那張單就沒有寫到 task 去 我再確認一下



這邊如果是兩個人就表示跟原本一樣

我看斷點 沒寫入 task 是我忘記補 add 但 stage 那我好像沒動是直接改上面的 不太確定為啥沒加到 我看一下


剛剛確定 pam 整個都跑成功


也有進 task 的關卡只是不知道為什麼沒有起 感覺好像是刷新關卡的 邏輯刷新掉了


恩恩 流程這邊主要舊兩個檢核點

1.MX_NEXT_APPROVER 這個是BPM的表會有目前簽核的人員
2.SIGN_STAGE

剛剛看到有進到 task 的關卡 也補 task table 的 add 也過單 但看 db 還是沒加進去 也沒報錯不太確定是怎麼樣，然後想說把版本丟到 iis 結果 pam 05 開得起來但build 的 iis 開不起來 ... 就先調回 14 號的 pam了


你把剛剛改的推上去我看一下

發行那邊碰到甚麼問題嗎 要把舊的刪掉 那個發行選像記得要勾

或是copy過去IIS那邊沒處理好 這個明天再看一下

有勾 有刪掉 而且 05 run 有啟動成功，但 build 後，先砍 iis 上的檔案，NLOG 刪不掉 其他的都刪掉後再上傳


推上去了，只有補一句 我看有跑到那句但沒寫進DB去，也沒報錯 ...


有排除DB lock的可能性嗎

沒注意到， 剛剛忘記有沒有先關掉 GUI ，有可能是鎖到


恩 明天再試一下 不行的話可能先把設定拿掉走舊流程

辛苦了

我剛有先關掉了 TASK CONFIG 的改 0


OK